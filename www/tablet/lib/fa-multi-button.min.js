"use strict";!function(t){t.fn.famultibutton=function(e){function x(){i=!0,n.children("#bg").css("color",m.onBackgroundColor),n.children("#fg").css("color",m.onColor),o.trigger("setOn")}function w(){i=!1,n.children("#bg").css("color",m.offBackgroundColor),n.children("#fg").css("color",m.offColor),o.trigger("setOff")}function C(){i&&(i=!1,t("<div />").animate({width:100},{duration:700,easing:"swing",step:function(t,e){var o=(t-e.start)/(e.end-e.start);n.children("#bg").css("color",k(m.onBackgroundColor,m.offBackgroundColor,o)),n.children("#fg").css("color",k(m.onColor,m.offColor,o))}}))}function y(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):t}function k(t,e,o){t=y(t).replace(/^\s*#|\s*$/g,""),e=y(e).replace(/^\s*#|\s*$/g,""),3==t.length&&(t=t.replace(/(.)/g,"$1$1")),3==e.length&&(e=e.replace(/(.)/g,"$1$1"));var n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),s=parseInt(t.substr(4,2),16),a=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),l=parseInt(e.substr(4,2),16),f=a-n,c=r-i,u=l-s;return f=(f*o+n).toString(16).split(".")[0],c=(c*o+i).toString(16).split(".")[0],u=(u*o+s).toString(16).split(".")[0],1==f.length&&(f="0"+f),1==c.length&&(c="0"+c),1==u.length&&(u="0"+u),"#"+f+c+u}function I(e){var i=o.find("canvas#progress");if(e>0){0===i.length&&(i=t("<canvas>").attr({id:"progress"}).appendTo(n));var s=i[0];if(s){s.height=n.height(),s.width=n.width();var a=s.width/2,r=s.height/2;if(s.getContext){var l=s.getContext("2d");l.beginPath(),l.strokeStyle=m.onColor,l.arc(a,r,a*(-.4/90*Number(m.progressWidth)+.8),-.5*Math.PI,(-.5+2*e)*Math.PI,!1),l.lineWidth=.8*a*m.progressWidth/100,l.stroke()}}}else o.find("canvas#progress").remove()}function T(){clearTimeout(a),c=u>0?c-=m.step:c+=m.step,c>m.max&&(c=m.max),c<m.min&&(c=m.min),O();var t=l[Math.abs(u)];a=setTimeout(function(){T()},500-t)}function O(){var t=s[0];if(t.height=n.innerHeight(),t.width=n.innerWidth(),t.getContext){var e=t.getContext("2d");e.strokeStyle=m.offBackgroundColor;for(var o=m.max,a=m.min,r=t.height-Math.round(t.height*(c-a)/(o-a)),l=0;l<t.height;l+=4)e.lineWidth=1,e.beginPath(),e.moveTo(5,l),e.lineTo(25,l),e.stroke();e.strokeStyle=i?m.onBackgroundColor:k(m.offBackgroundColor,"#ffffff",.4),e.lineWidth=3,e.beginPath(),e.moveTo(5,r),e.lineTo(25,r),e.stroke(),e.fillStyle=k(m.offBackgroundColor,"#ffffff",.4),e.font="10px sans-serif",e.fillText(c,30,t.height)}}function P(){s.css({position:"absolute","z-index":-1}),d?s.animate({left:.6*-n.innerWidth()+"px"}):s.animate({left:n.innerWidth()/5+"px"})}function D(t){t=(t||navigator.userAgent).toLowerCase();var e=t.match(/android\s([0-9\.]*)/);return e?e[1]:!1}function j(){var e,s,I,l=D(),h=l&&parseFloat(l)<5,v=h?"touchstart":"touchstart mousedown",b=h?"touchmove":"touchmove mousemove",y=h?"touchend":"touchend mouseup",k=h?"touchleave":"touchleave mouseout";"push"==m.mode?(n.on(v,function(o){o.preventDefault(),o.stopImmediatePropagation(),s=t(window).scrollTop(),e=t(window).scrollLeft()}),n.on(y,function(n){return n.preventDefault(),n.stopImmediatePropagation(),Math.abs(s-t(window).scrollTop())>3||Math.abs(e-t(window).scrollLeft())>3?void 0:(I=i,x(),"function"==typeof m.toggleOn&&m.toggleOn.call(this),setTimeout(function(){C()},200),I===!0&&setTimeout(function(){x()},1e3),setTimeout(function(){i===!0&&x()},1200),o.trigger("clicked"),!1)})):"updown"==m.mode?(n.on(v,function(t){t.preventDefault(),t.stopImmediatePropagation(),I=i,x(),"function"==typeof m.toggleOn&&m.toggleOn.call(this)}),n.on(y,function(t){return t.preventDefault(),t.stopImmediatePropagation(),"function"==typeof m.toggleOff&&m.toggleOff.call(this),setTimeout(function(){C()},200),I===!0&&setTimeout(function(){x()},1e3),setTimeout(function(){i===!0&&x()},1200),o.trigger("clicked"),!1})):"toggle"==m.mode?(n.on(v,function(o){o.preventDefault(),o.stopImmediatePropagation(),s=t(window).scrollTop(),e=t(window).scrollLeft()}),n.on(y,function(n){return n.preventDefault(),n.stopImmediatePropagation(),Math.abs(s-t(window).scrollTop())>3||Math.abs(e-t(window).scrollLeft())>3?void 0:(i?(w(),"function"==typeof m.toggleOff&&m.toggleOff.call(this)):(x(),"function"==typeof m.toggleOn&&m.toggleOn.call(this)),o.trigger("clicked"),!1)})):"dimmer"==m.mode&&(n.on(v,function(t){t.preventDefault(),t.stopImmediatePropagation();var e=t.originalEvent;f=e.touches?e.touches[0].clientY:t.pageY,u=0,p=!0}),n.on(k,function(t){t.preventDefault(),t.stopImmediatePropagation(),d&&(d=!1,o.animate({top:0}),clearInterval(a),r=!1,P()),p=!1}),n.on(y,function(t){return t.preventDefault(),t.stopImmediatePropagation(),d?(d=!1,o.animate({top:0}),clearTimeout(a),r=!1,"function"==typeof m.valueChanged&&m.valueChanged.call(this,c)):i?(w(),"function"==typeof m.toggleOff&&m.toggleOff.call(this)):(x(),"function"==typeof m.toggleOn&&m.toggleOn.call(this)),d=!1,p=!1,P(),O(),o.trigger("clicked"),!1}),n.on(b,function(t){t.preventDefault(),t.stopImmediatePropagation(),p&&(d=!0);var e=t.originalEvent;g=e.touches?e.touches[0].clientY:t.pageY,u=g-f,u>20&&(u=20),-20>u&&(u=-20),d&&(this.style.top=u+"px",r||(P(),T(),r=!0))}))}if(this.length>1)return this.each(function(){t(this).famultibutton(e)}),this;var n,s,a,o=this,i=!1,r=!1,l=[0,10,40,80,120,140,150,160,180,200,240,260,280,300,320,420,430,440,450,460,470],f=0,c=0,u=0,h=0,g=0,d=!1,p=!1,v={backgroundIcon:"fa-circle",classes:["fa-2x"],icon:"fa-power-off",offColor:"#2A2A2A",offBackgroundColor:"#505050",onColor:"#2A2A2A",onBackgroundColor:"#aa6900",mode:"toggle",toggleOn:null,toggleOff:null,valueChanged:null,progressWidth:15,max:100,min:0,step:1},m=t.extend({},v,e),b=function(){m=t.extend({},m,o.data());var e=o.html()!==o.text()?o.find("*").detach():jQuery("<div>",{}).text(o.text());if(e.attr("id","fg"),e.addClass("fa-stack-1x"),o.html(""),n=t("<div/>",{"class":"famultibutton"}).appendTo(o),n.addClass("fa-stack"),jQuery("<i/>",{id:"bg","class":"fa fa-stack-2x"}).addClass(m.backgroundIcon).appendTo(n),jQuery("<i/>",{id:"fg","class":"fa fa-stack-1x"}).addClass(m.icon).appendTo(n),e.appendTo(n),m.classes&&m.classes.length>0)for(var i=0;i<m.classes.length;i++)n.addClass(m.classes[i]);return o.o=m,w(),"dimmer"==m.mode&&(s=t("<canvas>").attr({id:"scale",height:o.height()+"px",width:o.width()+"px"}).appendTo(n),h=parseInt(s.offset().top)-parseInt(n.offset().top),O(),P()),o.data("famultibutton",o),j(),o};return this.setOn=function(){x()},this.setOff=function(){w()},this.getState=function(){return i},this.getValue=function(){return c},this.setDimValue=function(t){c=t,O()},this.setProgressValue=function(t){I(t)},b()}}(jQuery);